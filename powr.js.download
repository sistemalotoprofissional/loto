!function(){if("undefined"==typeof loadPowr){window.addEventListener?window.addEventListener("message",g):window.attachEvent("onmessage",g);var e=0;POWR_RECEIVERS=[];var t=document.createEvent("Event");t.initEvent("powrPingListener",!0,!0),loadPowr=function t(){for(var o=null,n=null,m=null,w=!1,g=document.querySelectorAll("script"),E=0;E<g.length;E++){var f=g[E],h=f.getAttribute("src");if(null!=h){var v=f.getAttribute("powr-token"),R=f.getAttribute("external-type");R||(R=f.getAttribute("platform"));var y=f.getAttribute("template-powr-token"),_=f.getAttribute("powr-load");if(null==_&&(_="sync"),l()&&l()<=9&&(_="sync"),w=f.getAttribute("demo-mode"),null!=v?o=v:h.search("powr-token")>-1&&void 0!==(m=a(h))["powr-token"]&&m["powr-token"].length>0&&(o=m["powr-token"]),null!=R)n=R;else if(h.search("external-type")>-1){null!=(S=(m=a(h))["external-type"])&&S.length>0&&(n=S)}else if(h.search("platform")>-1){var S;null!=(S=(m=a(h)).platform)&&S.length>0&&(n=S)}if("ecwid"==n&&(_="sync"),null!=o||null!=n)break}}if(null==o||0==o.length)try{o=window.top.location.host}catch(e){o=""}var C=/\[powr-[^\]]*\]/gi,b=/\[powr-[^\s\]]*/gi,O=document.querySelectorAll("a");for(E=0;E<O.length;E++){if(!d(A=O[E])){var P=A.previousSibling,I=A.nextSibling;if(P&&I&&A.getAttribute("href")&&A.getAttribute("href").search("tel")>-1&&3==P.nodeType&&3==I.nodeType&&P.nodeValue.match(b)&&I.nodeValue.search("]")>-1){var W=A.innerHTML,V=P.nodeValue.match(/powr-[^\s\]]*/gi)[0];(k=document.createElement("div")).innerHTML='<div class="'+V+'" label="'+W+'"></div>',P.parentNode.removeChild(P),I.parentNode.removeChild(I),A.parentNode.replaceChild(k,A)}}}for(O=document.querySelectorAll("body, body *"),E=0;E<O.length;E++){var A,L=(A=O[E]).childNodes;if(!d(A))for(var T=0;T<L.length;T++){var x=L[T];if(3==x.nodeType){var k,N=x.nodeValue,M=N.replace(C,i);if(M!=N)(k=document.createElement("div")).innerHTML=M,A.replaceChild(k,x)}}}if(0==document.querySelectorAll("#powrIframeLoader").length){var H=document.createElement("div"),q=document.getElementsByTagName("base")[0]||document.getElementsByTagName("script")[0];H.id="powrIframeLoader",H.innerHTML="&shy;<style> .powrLoaded iframe { visibility: hidden; } </style>",q.parentNode.insertBefore(H,q)}var J=document.querySelectorAll("[class*=powr-]"),B=!1,j=!1;for(E=0;E<J.length;E++){var D=J[E];if(!d(D)&&!(D instanceof SVGElement||D.className.search("powrLoaded")>-1)){var U=D.className.split(/\s+/);for(T=0;T<U.length;T++)if(0===U[T].toLowerCase().search("powr-")){var Y=U[T].toLowerCase().replace("powr-","");break}if(void 0!==Y){"popup"==Y&&(B=!0),"scroll-to-top"==Y&&(j=!0);var z=D.getAttribute("label");if(null==z&&(z=""),"weebly_"!=z){D.className+=" powrLoaded",null==y&&(y="");var G=D.getAttribute("id");null==G&&(G="");var X=D.getAttribute("view-mode"),F="true"==w||"true"==D.getAttribute("demo-mode"),K="https://www.powr.io/"+Y+"/u/"+G+"#platform="+(S||"html"),Q=encodeURIComponent(z),Z="https://www.powr.io/plugins/"+Y+"/cached_view?load="+_+"&index="+e+"&unique_label="+G+"&powr_token="+o+"&user_label="+Q+"&demo_mode="+F,$="https://www.powr.io/plugins/"+Y+"/view.json?unique_label="+G+"&powr_token="+o+"&user_label="+Q+"&demo_mode="+F;if(null!=n){var ee="&external_type="+n;$+=ee,Z+=ee}if(null!=y){var te="&template_powr_token="+y;$+=te,Z+=te}if(null!=X){var oe="&view_mode="+X;$+=oe,Z+=oe}if(s(),s()&&($+="&url="+encodeURIComponent(s())),document.location.host)var ne=document.location.protocol+"//"+document.location.host;else try{ne=document.location.ancestorOrigins[0]}catch(e){if(window.top&&window.top.location&&window.top.location.host)ne=window.top.location.protocol+"//"+window.top.location.host;else ne=""}$+="&request_url="+encodeURIComponent(ne),Z+="&request_url="+encodeURIComponent(document.location.href);["form-builder","job-application-form","feedback-form","poll","survey","mailing-list","wedding-invitation","contact-form","membership-form","payment-form","order-form"].indexOf(Y)<0&&0==Q.length&&(Z=K);var re=document.createElement("iframe");re.src=Z,re.setAttribute("powrindex",e),re.width="100%",re.height="0px",re.style.transition="height 0.3s",re.style.webkitTransition="height 0.3s",re.style.height="0px",re.style.display="block",re.frameBorder="0",re.style.visibility="visible",re.setAttribute("webkitallowfullscreen",""),re.setAttribute("mozallowfullscreen",""),re.setAttribute("allowfullscreen",""),"ecwid"==n&&(D.style.minWidth="280px");try{/iPhone|iPod|iPad/.test(navigator.userAgent)&&(re.style.minWidth="100%",re.style.width="1px",re.setAttribute("scrolling","no"))}catch(e){console.log("Err: "+e)}c(re,e,Z),D.appendChild(re);var ie=re.contentWindow;POWR_RECEIVERS.push({receiver:ie,url:Z,data_url:$}),"async"==_&&(p(e),u(e,re)),e++}}}}B&&(r(document,"click",function(e){var t=(e=e||window.event).relatedTarget||e.toElement||e.target;if(t&&t.classList.contains("trigger-popup"))for(var o=0;o<POWR_RECEIVERS.length;o++)POWR_RECEIVERS[o].receiver.postMessage(JSON.stringify({message:"triggerPowrPopupClick"}),POWR_RECEIVERS[o].url)}),r(document,"mouseout",function(e){if((e=e||window.event).clientY<5)for(var t=0;t<POWR_RECEIVERS.length;t++)POWR_RECEIVERS[t].receiver.postMessage(JSON.stringify({message:"exitDocument"}),POWR_RECEIVERS[t].url)})),j&&r(document,"scroll",function(e){for(var t=(document.documentElement.scrollHeight||document.body.scrollHeight)-window.innerHeight,o=100*(document.documentElement.scrollTop||document.body.scrollTop)/t,n=0;n<POWR_RECEIVERS.length;n++)POWR_RECEIVERS[n].receiver.postMessage(JSON.stringify({message:"scrollPosition",scrollPercentage:o}),POWR_RECEIVERS[n].url)}),"ecwid"==n&&(window.powrAutoLoad&&clearTimeout(window.powrAutoLoad),window.powrAutoLoad=setTimeout(function(){t()},500))};for(var o=0;o<10;o++)setTimeout(function(){loadPowr()},2e3*o);r(window,"load",loadPowr);var n=!1;r(window,"keydown",function(e){if(80==e.keyCode&&(n=!0,setTimeout(function(){n=!1},2e3)),38==e.keyCode&&n){for(var t=0;t<POWR_RECEIVERS.length;t++)POWR_RECEIVERS[t].receiver.postMessage(JSON.stringify({message:"showEdit"}),POWR_RECEIVERS[t].url);return e.preventDefault(),!1}if(40==e.keyCode&&n){for(t=0;t<POWR_RECEIVERS.length;t++)POWR_RECEIVERS[t].receiver.postMessage(JSON.stringify({message:"hideEdit"}),POWR_RECEIVERS[t].url);return e.preventDefault(),!1}})}function r(e,t,o){e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent&&e.attachEvent("on"+t,o)}function i(e,t,o,n,r,i){var a=e,l=a.match(/powr-[^\s\]]*/i),d=a.match(/id="[^"]*"/i);null==d&&(d=a.match(/id='[^']*'/i)),null==d&&null!=(d=a.match(/id=[^\]]*/i))&&(d=d[0].replace("id=",'id="')+'"'),null==d&&(d=a.match(/label="[^"]*"/i)),null==d&&(d=a.match(/label='[^']*'/i)),null==d&&(d="");var s='<div class="'+l+'" '+d+"></div>";return s}function a(e){for(var t={},o=e.search("\\?"),n=(e=e.substr(o+1)).split("&"),r=0;r<n.length;r++){var i=n[r].split("=");if(void 0===t[i[0]])t[i[0]]=i[1];else if("string"==typeof t[i[0]]){var a=[t[i[0]],i[1]];t[i[0]]=a}else t[i[0]].push(i[1])}return t}function l(){var e=navigator.userAgent.toLowerCase();return-1!=e.indexOf("msie")&&parseInt(e.split("msie")[1])}function d(e){for(var t=!1,o=e;o&&o!==document;o=o.parentNode)if(null!=o.classList&&o.classList.contains("powr-ignore")){t=!0;break}return t}function s(){try{return window.top.location.href}catch(e){return""}}function c(e,t,o){function n(){var n={message:"loaded",data:{iframe_index:t,parent_window_width:window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth,parent_window_height:window.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight}};e.contentWindow.postMessage(JSON.stringify(n),o)}e.addEventListener?e.addEventListener("load",n):e.attachEvent("onload",n)}function u(e,o){o.addEventListener&&(o.addEventListener("powrPingListener",function(){return POWR_RECEIVERS[e].listenerConnected=!0,!0},!1),POWR_RECEIVERS[e].ping_interval=setInterval(function(){var o=document.querySelectorAll('[powrindex="'+e+'"]')[0];o&&(POWR_RECEIVERS[e].listenerConnected=!1,o.dispatchEvent(t),!1===POWR_RECEIVERS[e].listenerConnected&&(console.log("POWr Lost connection. Reconnecting"),clearInterval(POWR_RECEIVERS[e].ping_interval),POWR_RECEIVERS[e].receiver=o.contentWindow,p(e),u(e,o)))},2e3))}function p(e){var t=new XMLHttpRequest;t.open("GET",POWR_RECEIVERS[e].data_url,!0),t.withCredentials=!0,t.onreadystatechange=function(){if((t.readyState==XMLHttpRequest.DONE||4==t.readyState)&&200==t.status){var o=JSON.parse(t.responseText);o.iframe_index=e,POWR_RECEIVERS[e].data=o;var n=setInterval(function(){POWR_RECEIVERS[e].loaded&&(POWR_RECEIVERS[e].receiver.postMessage(JSON.stringify({message:"loadView",data:o}),POWR_RECEIVERS[e].url),clearInterval(n))},10)}},t.send()}function m(e){switch(e.scrollTo){case"top":w(0,e.scrollSpeed);break;case"bottom":!function(e){w((document.documentElement.scrollHeight||document.body.scrollHeight)-window.innerHeight+50,e)}(e.scrollSpeed);break;case"text":!function(e,t){var o=function(e){for(var t=document.querySelectorAll("body, body *"),o=0;o<t.length;o++)for(var n=t[o],r=n.childNodes,i=0;i<r.length;i++){var a=r[i];if(3==a.nodeType){var l=a.nodeValue;if(l.search(e)>-1)return n}}return!1}(e);if(!o)return;w(o.getBoundingClientRect().top+window.scrollY-150,t)}(e.scrollToText,e.scrollSpeed);break;case"anchor":!function(e,t){var o=document.getElementById(e);if(!o)return;w(o.getBoundingClientRect().top+window.scrollY-150,t)}(e.scrollToAnchor,e.scrollSpeed)}}function w(e,t,o){var n=document.documentElement.scrollTop||document.body.scrollTop;n!==o&&(window.requestAnimationFrame(function(){w(e,t,n)}),n<e?window.scrollTo(0,n+(e-n)/t):window.scrollTo(0,n-(n-e)/t))}function g(e){try{var t=JSON.parse(e.data);if("viewLoaded"==t.message){var o=t.data.iframe_index;POWR_RECEIVERS[o].loaded=!0}else if("updateSize"==t.message){"undefined"!=typeof gadgets&&void 0!==gadgets.window&&void 0!==gadgets.window.adjustHeight&&gadgets.window.adjustHeight(t.data.height);o=t.data.iframe_index;var n=document.querySelectorAll('[powrindex="'+o+'"]')[0];if(n&&(n.height=t.data.height+"px",n.style.height=t.data.height+"px",n.style.display="inline",null!=t.data.postCss))for(var r in t.data.postCss)n.style[r]=t.data.postCss[r];t.data.postMessage&&"scrollTo"==t.data.postMessage.messageType&&m(t.data.postMessage)}else if("loadMe"==t.message){o=t.data.iframe_index;null!=POWR_RECEIVERS[o]&&null!=POWR_RECEIVERS[o].data&&POWR_RECEIVERS[o].receiver.postMessage(JSON.stringify({message:"loadView",data:POWR_RECEIVERS[o].data}),POWR_RECEIVERS[o].url)}}catch(e){}}}();